<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Session</title>
</head>
<body>

<button id="login" >Login</button>
<button id="logout" >Logout</button>

<hr>

<button id="send_request" >Send a request</button>

<hr>

<button id="destroy_session" type="button">Destroy the session</button>


<script src="../quickblox.min.js"></script>

<script>
var config = {
    sessionManagement: true
};

var creds = {
    'appId': 39854,
    'authKey': 'JtensAa9y4AM5Yk',
    'authSecret': 'AsDFwwwxpr3LN5w'
}

// 22870126
var user = {
    email: 'session@session.com',
    login: 'session',
    password: '49249session'
}

// email sessionmanagment@test.com
// login sessionmanagment
// pass 49249sessionmanagment
// id 23125767
var userParams = {
    email: 'sessionmanagment@test.com',
    password: '49249sessionmanagment'
};

var login = document.getElementById('login');
var logout = document.getElementById('logout');

var sendRequest = document.getElementById('send_request');

var destroySession = document.getElementById('destroy_session');


// By session ('asdasdasd', creds.appId)
QB.init(creds.appId, creds.authKey, creds.authSecret, config).then(function(sessionToken) {
    console.info(`Success init ${sessionToken}`);

    /* LOGIN */
    login.addEventListener('click', function() {
        QB.login(userParams, function(err, result) {
            console.log('LOGIN Callback', result, err);
        });

        return false;
    });

    /* LOGOUT */
    logout.addEventListener('click', function() {
        QB.logout(function(err, result) {
            console.log('LOGIN Callback', result, err);
        });

        return false;
    });

    /* SEND REQUEST */
    sendRequest.addEventListener('click', function() {
        QB.chat.dialog.list(null, function(err, resDialogs) {
            err ? console.error(err) : console.info(resDialogs);
        });

        return false;
    });
 
    destroySession.addEventListener('click', function() {
        QB.destroySession(function() {
            console.info('Destroyed the session');
        });
        
        return false;
    });
});
</script>
</body>
</html>
